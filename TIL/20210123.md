# íšŒì› ê´€ë¦¬ ì˜ˆì œ - ì›¹ MVC ê°œë°œ

## 1. íšŒì› ì›¹ ê¸°ëŠ¥ - í™ˆ í™”ë©´ ì¶”ê°€

### 1.1. HomeController ë§Œë“¤ê³  ë§¤í•‘ ì •ë³´ ì¶”ê°€
```java
package hello.hellospring.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;

@Controller
public class HomeController {

    @GetMapping("/")
    public String home() {
        return "home";
    }
}

```
- `@GetMapping("/")`: / ë’¤ì— ì•„ë¬´ê²ƒë„ ì•ˆ ë“¤ì–´ì™”ì„ ë•Œ(=localhost:9090) home.htmlì„ ë°˜í™˜í•œë‹¤.
- resources/static í´ë” ì•ˆì— index.htmlì„ ë§Œë“¤ë©´ ìë™ìœ¼ë¡œ ì›°ì»´ í˜ì´ì§€ë¡œ ì¸ì‹í–ˆì—ˆë˜ ê±´ ë­ì•¼?
  - 1) ë¨¼ì € ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ë‚´ì—ì„œ ê´€ë ¨ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì°¾ê³ , ê·¸ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì—†ìœ¼ë©´
  - 2) static ì•ˆì˜ ì»¨í…ì¸ ë¥¼ ë°˜í™˜í•œë‹¤.
  - 3) ì´ ê²½ìš°ì—ëŠ” Controllerì—ì„œ ë§¤í•‘ì„ í•´ì¤¬ê¸° ë•Œë¬¸ì— home.htmlì„ ë¦¬í„´í•  ìˆ˜ ìˆëŠ” ê²ƒ.

### 1.2. home.html ë§Œë“¤ê¸°
resources/templates ì•ˆì— ë§Œë“¤ì–´ì¤€ë‹¤.
```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"> 
<head>
    <meta charset="UTF-8">
    <title>íšŒì› ê°€ì…</title>
</head>
<body>
<div class="container">
    <div>
    <h1>Hello Spring!</h1>
        <p>íšŒì› ê¸°ëŠ¥</p>
        <p>
            <a href="/members/new">íšŒì› ê°€ì…</a>
            <a href="/members">íšŒì› ëª©ë¡</a>
        </p>
    </div>
</div><!--container-->
</body>
</html>
```
![screenshot](./img/day7_memberhome.png)

## 2. íšŒì› ì›¹ ê¸°ëŠ¥ - ë“±ë¡

### 2.1. ë§¤í•‘ ì •ë³´ ì¶”ê°€

ì´ì „ì— ë§Œë“¤ì–´ë’€ë˜ MemberControllerì— ì¶”ê°€
```java
@GetMapping("/members/new")
public String createForm() {
    return "members/createMemberForm";
}
```
- `/members/new`ë¼ëŠ” uriê°€ ë“¤ì–´ì˜¤ë©´ `members/createMemberForm`.htmlì„ ë°˜í™˜í•´ì¤˜

### 2.2. view ë§Œë“¤ê¸°
```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<div class="container">
    <form action="/members/new" method="POST">
        <div class="form-group">
            <label>ì´ë¦„</label>
            <input type="text" id="name" name="name" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"/>
        </div>
        <button type="submit">ë“±ë¡</button>
    </form>

</div><!--container-->
</body>
</html>
```
![screenshot](img/day7_membernew.png)<br/>

### 2.3. íšŒì› ë“±ë¡ Controller ë§Œë“¤ê¸°
#### 2.3.1. MemberForm ë§Œë“¤ê¸°
- htmlì˜ formê³¼ ë§¤ì¹­ë˜ëŠ” í´ë˜ìŠ¤
```java
package hello.hellospring.controller;

public class MemberForm {
    private String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}
```
#### 2.3.2. Controllerì— `@PostMapping` ì¶”ê°€
```java
@PostMapping("/members/new")
public String create(MemberForm form) {
    Member member = new Member();
    member.setName(form.getName());

    memberService.join(member);

    return "redirect:/";
}
```
- htmlì—ì„œ methodê°€ POSTì˜€ìœ¼ë¯€ë¡œ `@PostMapping` ì–´ë…¸í…Œì´ì…˜ ì¶”ê°€.
  - ì¡°íšŒí•  ë•ŒëŠ” Get, ë°ì´í„°ë¥¼ ì „ë‹¬í•  ë•ŒëŠ” Post
- Member ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ê³ , ì´ë¦„ì„ ì„¸íŒ…í•˜ëŠ”ë° `formì—ì„œ ê°€ì ¸ì˜¨ ì´ë¦„`ìœ¼ë¡œ ì„¸íŒ…í•œë‹¤.
- `return "redirect:/"` : í™ˆ í™”ë©´ìœ¼ë¡œ ë³´ë‚¸ë‹¤.<br/>
![createForm](./img/day7_createForm.gif)
- ì˜ ë¨.

## 3. íšŒì› ì›¹ ê¸°ëŠ¥ - ì¡°íšŒ

### 3.1. ë§¤í•‘ ì •ë³´ ì¶”ê°€
ê¸°ì¡´ì— ë§Œë“¤ì–´ë’€ë˜ MemberController.javaì— ì¶”ê°€í•œë‹¤.
```java
@GetMapping("/members")
public String list(Model model) {
    List<Member> members = memberService.findMembers();
    model.addAttribute("members", members);

    return "members/memberList";
}
```

### 3.2. view ë§Œë“¤ê¸°
ë§¤í•‘ì—ì„œ ë¦¬í„´í•´ì¤˜ì•¼ í•˜ëŠ” memberList.htmlì„ ë§Œë“¤ì–´ì¤€ë‹¤.
```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>íšŒì› ì¡°íšŒ</title>
</head>
<body>
<div class="container">
    <div>
        <table>
            <thead>
            <tr>
                <th>#</th>
                <th>ì´ë¦„</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="member : ${members}">
                <td th:text="${member.id}"></td>
                <td th:text="${member.name}"></td>
            </tr>
            </tbody>
        </table>
    </div>

</div>
</body>
</html>
```
![](./img/day7_memberList.gif)
- ì˜ ì¡°íšŒëœë‹¤.
- `th:each` : forEachë¬¸ì´ë‘ ë˜‘ê°™ë‹¤ê³  ìƒê°í•˜ë©´ ë¨.
- ğŸ’¡ `cmd + E` : ì œì¼ ìµœê·¼ì— ì¡°íšŒí•œ íŒŒì¼ ëª©ë¡ ë³´ê¸°

